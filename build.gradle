/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
  id 'java'
  id 'maven'
}

sourceSets {
  main {
    java {
      srcDirs "src/main/java"
      // 忽略所有的 src/main/java/net/xdob/icap4j/example/old目录
      exclude 'net/xdob/icap4j/example/old/**'
    }
    resources {
    }
  }
  test{
    java {
      // 忽略所有的 src/test/java/test目录
      exclude '**'
    }
    resources {
    }
  }
}

repositories {
  mavenLocal()
  maven { url 'https://maven.aliyun.com/repository/public/' }
  mavenCentral()
}

dependencies {
  implementation("io.netty:netty-all:4.1.78.Final")
      {
        exclude module: 'netty-transport-native-epoll'
        exclude module: 'netty-transport-classes-epoll'
        exclude module: 'netty-transport-classes-kqueue'
        exclude module: 'netty-resolver-dns-classes-macos'
        exclude module: 'netty-transport-native-kqueue'
        exclude module: 'netty-transport-native-unix-common'
        exclude module: 'netty-resolver-dns-native-macos'
      }
  implementation("com.google.guava:guava:31.0.1-jre")
  implementation("org.slf4j:slf4j-api:1.7.21")
  testImplementation 'junit:junit:4.8.1'
}

sourceCompatibility = '1.8'

java {
  withSourcesJar()
  withJavadocJar()
}

// javadoc 配置，这里是自定义了 java doc 的一些配置
javadoc {
  description = "Generates project-level javadoc for use in -javadoc jar"

  options.memberLevel = org.gradle.external.javadoc.JavadocMemberLevel.PROTECTED
  options.author = true
  options.version = true
  options.header = project.name
  options.addStringOption('Xdoclint:none', '-quiet')

  // suppress warnings due to cross-module @see and @link references;
  // note that global 'api' task does display all warnings.
  logging.captureStandardError LogLevel.INFO
  logging.captureStandardOutput LogLevel.INFO // suppress "## warnings" message
  options.encoding = "UTF-8"  //编码一定要配置否则直接出错
  options.charSet = 'UTF-8'
}


